<div class="simple-calendar-wrapper">
  <!-- Cabeçalho da Agenda -->
  <div class="flex items-center justify-between mb-6">
    <div class="flex items-center gap-4">
      <!-- Seletor de Visualização -->
      <select id="calendar-view-selector" 
          class="px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
        <option value="month">Mês</option>
        <option value="week">Semana</option>
        <option value="day">Dia</option>
      </select>

      <!-- Filtro por Tipo de Evento -->
      <select id="calendar-event-type-filter" 
          class="px-3 py-2 text-sm border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-white focus:ring-2 focus:ring-blue-500 focus:border-blue-500">
        <option value="all">Todos os tipos</option>
        <% event_types.each do |type| %>
          <option value="<%= type[:value] %>"><%= type[:label] %></option>
        <% end %>
      </select>
    </div>

    <!-- Botões de Navegação -->
    <div class="flex items-center gap-2">
      <button type="button" 
          class="px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      </button>
      
      <button type="button" 
          class="px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500">
        Hoje
      </button>
      
      <button type="button" 
          class="px-3 py-2 text-sm font-medium text-gray-700 dark:text-gray-300 bg-white dark:bg-gray-700 border border-gray-300 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 focus:outline-none focus:ring-2 focus:ring-blue-500">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
        </svg>
      </button>
    </div>
  </div>

  <!-- Calendário Principal -->
  <div class="bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-6 shadow-lg">
    <div id="<%= calendar_id %>" style="min-height: 600px;">
      <!-- Calendário Simples em HTML -->
      <div class="calendar-container">
        <div class="calendar-header mb-4">
          <h3 class="text-lg font-semibold text-gray-900 dark:text-white text-center">
            <%= Date.current.strftime("%B de %Y") %>
          </h3>
        </div>
        
        <!-- Grid do Calendário -->
        <div class="grid grid-cols-7 gap-1 mb-2">
          <% %w[Dom Seg Ter Qua Qui Sex Sáb].each do |day| %>
            <div class="text-center text-sm font-medium text-gray-500 dark:text-gray-400 py-2">
              <%= day %>
            </div>
          <% end %>
        </div>
        
        <div class="grid grid-cols-7 gap-1">
          <% (1..31).each do |day| %>
            <div class="h-20 border border-gray-200 dark:border-gray-700 p-1 text-sm text-gray-900 dark:text-white hover:bg-gray-50 dark:hover:bg-gray-700 cursor-pointer">
              <div class="font-medium"><%= day %></div>
              <div class="text-xs text-gray-500 dark:text-gray-400">
                <!-- Eventos do dia serão mostrados aqui -->
                <% day_events = events_data.select { |e| e[:start].include?(day.to_s.rjust(2, '0')) } %>
                <% if day_events.any? %>
                  <% day_events.first(2).each do |event| %>
                    <div class="text-xs p-1 rounded mb-1 truncate" style="background-color: <%= event[:color] %>; color: white;">
                      <%= event[:title] %>
                    </div>
                  <% end %>
                  <% if day_events.count > 2 %>
                    <div class="text-xs text-gray-500">+<%= day_events.count - 2 %> mais</div>
                  <% end %>
                <% end %>
              </div>
            </div>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <!-- Legenda de Cores -->
  <div class="mt-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4">
    <h4 class="text-sm font-medium text-gray-900 dark:text-white mb-3">Legenda de Eventos</h4>
    <div class="flex flex-wrap gap-3">
      <% event_types.each do |type| %>
        <div class="flex items-center gap-2">
          <div class="w-3 h-3 rounded-full" style="background-color: <%= type[:color] %>"></div>
          <span class="text-sm text-gray-600 dark:text-gray-400"><%= type[:label] %></span>
        </div>
      <% end %>
    </div>
  </div>

  <!-- Lista de Eventos -->
  <% if events_data.any? %>
    <div class="mt-6 bg-white dark:bg-gray-800 rounded-xl border border-gray-200 dark:border-gray-700 p-4">
      <h4 class="text-sm font-medium text-gray-900 dark:text-white mb-3">Eventos do Mês</h4>
      <div class="space-y-2">
        <% events_data.each do |event| %>
          <div class="flex items-center gap-3 p-3 rounded-lg border border-gray-200 dark:border-gray-700 hover:bg-gray-50 dark:hover:bg-gray-700">
            <div class="w-3 h-3 rounded-full" style="background-color: <%= event[:color] %>"></div>
            <div class="flex-1">
              <div class="font-medium text-gray-900 dark:text-white"><%= event[:title] %></div>
              <div class="text-sm text-gray-500 dark:text-gray-400">
                <%= event[:start] %> - <%= event[:professional_name] %>
              </div>
            </div>
            <div class="text-xs px-2 py-1 rounded-full bg-gray-100 dark:bg-gray-700 text-gray-600 dark:text-gray-400">
              <%= event[:event_type].humanize %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  <% end %>
</div>
