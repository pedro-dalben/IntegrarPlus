<%= render ::Layouts::AdminComponent.new do |c| %>
  <% c.with_actions do %>
    <%= link_to admin_professionals_path, class: "ta-btn ta-btn-secondary inline-flex items-center gap-2" do %>
      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"/>
      </svg>
      Voltar
    <% end %>
  <% end %>

  <div class="space-y-6">
    <!-- Dados Pessoais -->
    <div class="rounded-2xl border border-gray-200 bg-white dark:border-gray-800 dark:bg-white/[0.03]">
      <div class="border-b border-gray-200 px-6 py-4 dark:border-gray-800">
        <h2 class="text-lg font-medium text-gray-800 dark:text-white">Dados Pessoais</h2>
      </div>
      <div class="p-4 sm:p-6">
        <div class="grid grid-cols-1 gap-5 md:grid-cols-2">
        <div class="md:col-span-2">
          <span class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">Nome Completo</span>
          <p class="h-11 w-full rounded-lg border border-gray-300 bg-gray-50 px-4 py-2.5 text-sm text-gray-800 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90"><%= @professional.full_name %></p>
        </div>

        <div>
          <span class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">Data de Nascimento</span>
          <p class="h-11 w-full rounded-lg border border-gray-300 bg-gray-50 px-4 py-2.5 text-sm text-gray-800 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90"><%= @professional.birth_date&.strftime("%d/%m/%Y") || "Não informada" %></p>
        </div>

        <div>
          <span class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">CPF</span>
          <p class="h-11 w-full rounded-lg border border-gray-300 bg-gray-50 px-4 py-2.5 text-sm text-gray-800 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90"><%= @professional.cpf %></p>
        </div>

        <div>
          <span class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">Telefone</span>
          <p class="h-11 w-full rounded-lg border border-gray-300 bg-gray-50 px-4 py-2.5 text-sm text-gray-800 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90"><%= @professional.phone || "Não informado" %></p>
        </div>

        <div>
          <span class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">E-mail</span>
          <p class="h-11 w-full rounded-lg border border-gray-300 bg-gray-50 px-4 py-2.5 text-sm text-gray-800 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90"><%= @professional.email %></p>
        </div>
      </div>

      <!-- Acesso e Status -->
      <div class="border-b border-gray-200 px-6 py-4 dark:border-gray-800">
        <h2 class="text-lg font-medium text-gray-800 dark:text-white">Acesso e Status</h2>
      </div>
      <div class="p-4 sm:p-6">
        <div class="grid grid-cols-1 gap-5 md:grid-cols-2">
        <div>
          <div class="flex items-center mb-2">
            <% if @professional.active? %>
              <span class="text-sm font-medium text-gray-700 dark:text-gray-300">✅ Ativo</span>
            <% else %>
              <span class="text-sm font-medium text-gray-700 dark:text-gray-300">❌ Inativo</span>
            <% end %>
          </div>
          <p class="text-sm text-gray-500 dark:text-gray-400">Status do profissional no sistema</p>
        </div>

        <div>
          <span class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">Status do Usuário</span>
          <% if @professional.user&.confirmed_invite? %>
            <span class="ta-badge ta-badge-success">Confirmado</span>
          <% elsif @professional.user&.pending_invite? %>
            <span class="ta-badge ta-badge-warning">Pendente</span>
          <% else %>
            <span class="ta-badge ta-badge-gray">Sem usuário</span>
          <% end %>
        </div>

        <% if @professional.user %>
          <div class="md:col-span-2">
            <div class="bg-green-50 border border-green-200 rounded-lg p-4">
              <div class="flex justify-between items-start">
                <div class="flex">
                  <div class="flex-shrink-0">
                    <svg class="h-5 w-5 text-green-400" viewBox="0 0 20 20" fill="currentColor">
                      <path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd" />
                    </svg>
                  </div>
                  <div class="ml-3">
                    <h3 class="text-sm font-medium text-green-800"><%= t('admin.users.info.system_user') %></h3>
                    <div class="mt-2 text-sm text-green-700">
                      <p>• E-mail: <%= @professional.user.email %></p>
                                              <p>• Status: 
                          <% if @professional.user.confirmed_invite? %>
                            <span class="font-medium"><%= t('admin.users.status.confirmed') %></span>
                          <% elsif @professional.user.pending_invite? %>
                            <span class="font-medium"><%= t('admin.users.info.invite_pending') %></span>
                          <% else %>
                            <span class="font-medium"><%= t('admin.users.info.no_invite') %></span>
                          <% end %>
                        </p>
                    </div>
                  </div>
                </div>
                <div class="ml-auto pl-3 flex gap-2">
                  <% unless @professional.user.confirmed_invite? %>
                    <%= link_to admin_user_invites_path(@professional.user), 
                        method: :post,
                        class: "ta-btn ta-btn-success ta-btn-sm inline-flex items-center gap-2",
                        data: { confirm: "Gerar novo link de convite para #{@professional.user.email}?" } do %>
                      <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.25 2.25 0 11-4.5 0 2.25 2.25 0 014.5 0z"/>
                      </svg>
                      <%= t('admin.users.buttons.generate_invite') %>
                    <% end %>
                  <% end %>
                  
                  <%= link_to admin_user_path(@professional.user), 
                      class: "ta-btn ta-btn-primary ta-btn-sm inline-flex items-center gap-2" do %>
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"/>
                    </svg>
                    <%= t('admin.users.buttons.view_user') %>
                  <% end %>
                </div>
              </div>
            </div>
          </div>
        <% end %>
      </div>

      <!-- Vínculos e Carga -->
      <div class="border-b border-gray-200 px-6 py-4 dark:border-gray-800">
        <h2 class="text-lg font-medium text-gray-800 dark:text-white">Vínculos e Carga</h2>
      </div>
      <div class="p-4 sm:p-6">
        <div class="grid grid-cols-1 gap-5 md:grid-cols-2">
        <div>
          <span class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">Forma de Contratação</span>
          <p class="h-11 w-full rounded-lg border border-gray-300 bg-gray-50 px-4 py-2.5 text-sm text-gray-800 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90"><%= @professional.contract_type&.name || "Não informada" %></p>
        </div>

        <div>
          <span class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">Data de Contratação</span>
          <p class="h-11 w-full rounded-lg border border-gray-300 bg-gray-50 px-4 py-2.5 text-sm text-gray-800 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90"><%= @professional.hired_on&.strftime("%d/%m/%Y") || "Não informada" %></p>
        </div>

        <div>
          <span class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">Carga Horária</span>
          <p class="h-11 w-full rounded-lg border border-gray-300 bg-gray-50 px-4 py-2.5 text-sm text-gray-800 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90"><%= @professional.workload_hhmm || "Não informada" %></p>
        </div>

        <div>
          <span class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">Código do Conselho</span>
          <p class="h-11 w-full rounded-lg border border-gray-300 bg-gray-50 px-4 py-2.5 text-sm text-gray-800 dark:border-gray-700 dark:bg-gray-900 dark:text-white/90"><%= @professional.council_code || "Não informado" %></p>
        </div>
      </div>

      <!-- Permissões e Competências -->
      <div class="border-b border-gray-200 px-6 py-4 dark:border-gray-800">
        <h2 class="text-lg font-medium text-gray-800 dark:text-white">Permissões e Competências</h2>
      </div>
      <div class="p-4 sm:p-6">
        <div class="grid grid-cols-1 gap-5 md:grid-cols-2">
        <div>
          <span class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">Grupos</span>
          <div class="flex flex-wrap gap-2">
            <% if @professional.groups.any? %>
              <% @professional.groups.each do |group| %>
                <span class="ta-badge ta-badge-primary"><%= group.name %></span>
              <% end %>
            <% else %>
              <span class="text-sm text-gray-500 dark:text-gray-400">Nenhum grupo atribuído</span>
            <% end %>
          </div>
        </div>

        <div>
          <span class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">Especialidades</span>
          <div class="flex flex-wrap gap-2">
            <% if @professional.specialities.any? %>
              <% @professional.specialities.each do |speciality| %>
                <span class="ta-badge ta-badge-success"><%= speciality.name %></span>
              <% end %>
            <% else %>
              <span class="text-sm text-gray-500 dark:text-gray-400">Nenhuma especialidade atribuída</span>
            <% end %>
          </div>
        </div>

        <div class="md:col-span-2">
          <span class="mb-1.5 block text-sm font-medium text-gray-700 dark:text-gray-400">Especializações</span>
          <div class="flex flex-wrap gap-2">
            <% if @professional.specializations.any? %>
              <% @professional.specializations.each do |specialization| %>
                <span class="ta-badge ta-badge-warning"><%= specialization.name %></span>
              <% end %>
            <% else %>
              <span class="text-sm text-gray-500 dark:text-gray-400">Nenhuma especialização atribuída</span>
            <% end %>
          </div>
        </div>
      </div>
    </div>

    <!-- Ações -->
    <div class="flex flex-col gap-3 sm:flex-row sm:justify-end">
      <%= link_to "Voltar", admin_professionals_path, 
          class: "shadow-theme-xs inline-flex items-center justify-center gap-2 rounded-lg bg-white px-4 py-3 text-sm font-medium text-gray-700 ring-1 ring-gray-300 transition hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-400 dark:ring-gray-700 dark:hover:bg-white/[0.03]" %>
      <%= link_to "Editar Profissional", edit_admin_professional_path(@professional), 
          class: "bg-brand-500 shadow-theme-xs hover:bg-brand-600 inline-flex items-center justify-center gap-2 rounded-lg px-4 py-3 text-sm font-medium text-white transition" %>
    </div>
  </div>
<% end %>


