<% edit_mode_active = params[:edit] == 'true' && current_user.permit?('beneficiaries.edit') %>
<div data-controller="edit-mode" data-edit-mode-editing="<%= edit_mode_active ? 'true' : 'false' %>">
  <% if current_user.permit?('beneficiaries.edit') %>
    <div class="mb-4 flex justify-end">
      <button type="button"
              data-action="click->edit-mode#toggle"
              data-edit-mode-target="toggleButton"
              class="<%= edit_mode_active ? 'bg-gray-500 hover:bg-gray-600' : 'bg-brand-500 hover:bg-brand-600' %> shadow-theme-xs inline-flex items-center justify-center gap-2 rounded-lg px-4 py-3 text-sm font-medium text-white transition">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
        </svg>
        <%= edit_mode_active ? 'Cancelar' : 'Editar' %>
      </button>
    </div>
  <% end %>

  <div data-edit-mode-target="viewContent" style="<%= edit_mode_active ? 'display: none;' : '' %>">
    <%= render partial: 'admin/beneficiaries/tabs/overview_view', locals: { beneficiary: beneficiary } %>
  </div>

  <% if current_user.permit?('beneficiaries.edit') %>
    <div data-edit-mode-target="editContent" style="<%= edit_mode_active ? '' : 'display: none;' %>">
      <%= render partial: 'admin/beneficiaries/tabs/overview_edit', locals: { beneficiary: beneficiary } %>
    </div>
  <% end %>
</div>
