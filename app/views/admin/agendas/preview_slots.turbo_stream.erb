<%= turbo_stream.replace "preview-container" do %>
  <div id="preview-container" class="space-y-4 max-h-96 overflow-y-auto">
    <% if @preview_data.present? %>
      <% @preview_data.each do |professional_id, data| %>
        <div class="border border-gray-200 rounded-lg p-3">
          <div class="text-sm font-medium text-gray-900 mb-2"><%= data[:name] %></div>
          <div class="space-y-1">
            <% data[:slots].first(10).each do |slot| %>
              <div class="text-xs text-gray-600">
                <%= slot[:start_time].strftime('%d/%m %H:%M') %> - <%= slot[:end_time].strftime('%H:%M') %>
                <% if slot[:available] %>
                  <span class="inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-green-100 text-green-800 ml-2">
                    Disponível
                  </span>
                <% else %>
                  <span class="inline-flex items-center px-1.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800 ml-2">
                    Ocupado
                  </span>
                <% end %>
              </div>
            <% end %>
            <% if data[:slots].length > 10 %>
              <div class="text-xs text-gray-500">... e mais <%= data[:slots].length - 10 %> slots</div>
            <% end %>
          </div>
        </div>
      <% end %>
    <% else %>
      <div class="text-center text-gray-500 py-8">
        <svg class="w-12 h-12 mx-auto text-gray-400 mb-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path>
        </svg>
        <p class="text-sm">Nenhum slot disponível</p>
      </div>
    <% end %>
  </div>
<% end %>
