#!/bin/bash

echo "ğŸ§ª Testando TailAdmin Pro..."

echo ""
echo "ğŸ“‹ 1. Verificando se o servidor estÃ¡ rodando..."
if curl -s http://localhost:3000 > /dev/null; then
    echo "âœ… Servidor Rails estÃ¡ rodando"
else
    echo "âŒ Servidor Rails nÃ£o estÃ¡ rodando"
    echo "   Execute: rails server -p 3000"
    exit 1
fi

echo ""
echo "ğŸ“‹ 2. Verificando se as imagens estÃ£o sendo servidas..."
if curl -s -I http://localhost:3000/assets/images/logo/logo.svg | grep -q "200 OK"; then
    echo "âœ… Imagens do logo estÃ£o sendo servidas"
else
    echo "âŒ Imagens do logo nÃ£o estÃ£o sendo servidas"
    echo "   Execute: ./bin/setup-assets"
fi

if curl -s -I http://localhost:3000/assets/images/user/owner.png | grep -q "200 OK"; then
    echo "âœ… Imagens de usuÃ¡rio estÃ£o sendo servidas"
else
    echo "âŒ Imagens de usuÃ¡rio nÃ£o estÃ£o sendo servidas"
    echo "   Execute: ./bin/setup-assets"
fi

echo ""
echo "ğŸ“‹ 3. Verificando se o JavaScript estÃ¡ sendo carregado..."
if curl -s http://localhost:3000/admin | grep -q "vite"; then
    echo "âœ… Vite estÃ¡ sendo carregado"
else
    echo "âŒ Vite nÃ£o estÃ¡ sendo carregado"
fi

echo ""
echo "ğŸ¯ PRÃ“XIMOS PASSOS:"
echo "   1. Abra o navegador e acesse: http://localhost:3000/admin"
echo "   2. FaÃ§a login com: admin@integrar.com / 123456"
echo "   3. Abra o console do navegador (F12)"
echo "   4. Execute no console: checkTailAdmin()"
echo "   5. Verifique o relatÃ³rio detalhado"
echo ""
echo "ğŸ”§ SE HOUVER PROBLEMAS:"
echo "   - Verifique se hÃ¡ erros no console do navegador"
echo "   - Execute: ./bin/setup-assets"
echo "   - Reinicie o servidor: pkill -f 'rails server' && rails server -p 3000 -d"
echo ""
echo "ğŸ“Š O relatÃ³rio do checkTailAdmin() mostrarÃ¡:"
echo "   â€¢ Alpine.js funcionando"
echo "   â€¢ Tailwind CSS funcionando"
echo "   â€¢ Vite funcionando"
echo "   â€¢ Imagens carregando"
echo "   â€¢ Header funcionando"
echo "   â€¢ Sidebar funcionando"
echo "   â€¢ Dropdowns funcionando"
echo "   â€¢ E muito mais..."
